<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Kount iOS Client</title>

    <!-- Bootstrap core CSS -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <link href="styles/navbar.css" rel="stylesheet"/>

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
<link href="styles/customize.css" rel="stylesheet"/>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container">

      <!-- Static navbar -->
      <nav class="navbar navbar-default">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="index.html">Kount</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li class="active"><a href="#">iOS</a></li>
              <li><a href="android.html">Android</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </nav>

      <!-- Main component for a primary marketing message or call to action -->
      <div class="container">
          <h1>iOS Client SDK Setup</h1>
          <p>Kount's SDK for iOS helps integrate Kount's fraud fighting solution into your iOS app.</p>
          <h3>Requirements</h3>
          <ul>
          <li><a href="http://www.kount.com/fraud-detection-software">Kount integration</a></li>
          <li><a href="https://developer.apple.com/xcode/download/">Xcode 8 and iOS 10 SDK</a></li>
          <li>iOS 8.0+ deployment target</li>
          </ul>
          <h3>Installation</h3>
          
          <p>Download the <a href="https://github.com/Kount/kount-ios-sdk">Kount iOS SDK</a> and unzip the file in a folder separate from your project.</p>
          <ul>
              <li>Open up your app in Xcode.
          <li>In Finder, drag the KountDataCollector folder into the top level of your project, and check <i>Copy If Needed</i>.
          <li>Modify your build settings <b>App Target</b> &gt; <b>Build Settings</b>.
          <ul>
              <li>Update Header Search Paths:</li>
              <ul><li>Add <code>$(PROJECT_DIR)/KountDataCollector</code></li></ul>
          </ul>
          </ul>
          
          <h3>Initialization</h3>
          <p>To set up the data collector, you'll need to set the merchant ID, configuration for location collection, and the Kount environment. While testing your integration you'll want to use the <i>Test</i> environment, switching to <i>Production</i> when your app is ready to release.</p>
          <h4>Setup</h4>
          <p>In your AppDelegate add the initialization code:</p>
          <h5>Objective-C</h5>
<pre class="prettyprint">#import "KDataCollector.h"
              
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  ...
  [[KDataCollector sharedCollector] setMerchantID:&lt;MERCHANT_ID&gt;]; 
  [[KDataCollector sharedCollector] setLocationCollectorConfig:KLocationCollectorConfigRequestPermission];
  [[KDataCollector sharedCollector] setEnvironment:KEnvironmentTest];
  ...
}</pre>
          <h5>Swift</h5>
<pre class="prettyprint">func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool { 
  ...
        KDataCollector.shared().merchantID = &lt;MERCHANT_ID&gt;
        KDataCollector.shared().locationCollectorConfig = KLocationCollectorConfig.requestPermission
        KDataCollector.shared().environment = KEnvironment.test
  ...
}
</pre>
 <h4>Location Permissions</h4>
<p>For location collection support you'll need to add this key to your <b>Info.plist</b> file:</p>
<pre class="prettyprint">&lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt;
&lt;string&gt;&lt;/string&gt;</pre>
<p>If you choose <code>KLocationCollectorConfigRequestPermission</code> the collector will request permission for you if needed. If you choose <code>KLocationCollectorConfigPassive</code> the collector will only gather location information if your app has requested permission and the user has granted it permission.</p>
<h3>Collection</h3>

          <p>Early in the checkout process you'll want to start the data collection with a unique session ID tied to the transaction, and collect once per unique session ID. For example, in the viewDidAppear method of a controller early in your transaction workflow, add the following:</p>
          <h5>Objective-C</h5>
          <pre class="prettyprint">#import "KDataCollector.h"

- (void)viewDidAppear:(BOOL)animated {
  ...
  [[KDataCollector sharedCollector] collectForSession:&lt;SESSION_ID&gt; 
                                           completion:^(NSString * _Nonnull sessionID,  
                                                        BOOL success, 
                                                        NSError * _Nullable error) {
    // Add handler code here if desired. The completion block is optional.
  }];
  ...
}</pre>
          <h5>Swift</h5>
          <pre class="prettyprint">override func viewDidAppear(animated: Bool) {
  ...
        KDataCollector.shared().collect(forSession: &lt;SESSION_ID&gt;) { (sessionID, success, error) in
            // Add handler code here if desired. The completion block is optional.
        }
  ...
}
</pre>
          <h3 id="migrating">Migrating to version 3.x</h3>
          <p>The interface and workflow of the SDK has changed between version 2 and version 3. The old version would have you create an instance of the Data Collector, configure it, make a call to collect, and then implement the delegate methods if you wished to receive feedback regarding the collection.</p>
          <p>With the new version, the Data Collector is implemented as a singleton and is configured when your app is created. The collect call is now a method on the Data Collector singleton and has an optional callback block you can implement if you wish to get additional information on the collection. Here are the steps to upgrade to version 3.x:</p>
          <ul>
              <li>Remove the old library and header file from your project and replace it with the new library and header file.</li>
              <li>Remove the old initialization code and replace it with the new initialization code methods on the DataCollector singleton in your AppDelegate.</li>
              <li>Remove the old call to collect and corresponding delegate methods and replace it with the collect method on the DataCollector singleton, and optionally implement the completion block.
          </ul>
          
      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
